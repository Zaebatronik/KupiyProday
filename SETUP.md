# Telegram Mini App - KupyProdai

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 18+
- MongoDB 6+
- npm –∏–ª–∏ yarn

### Backend

```bash
cd backend
npm install

# –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –¥–ª—è –∑–∞–≥—Ä—É–∑–æ–∫
mkdir uploads

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env —Ñ–∞–π–ª
# PORT=5000
# MONGODB_URI=mongodb://localhost:27017/kupyprodai

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ MongoDB
# Windows: mongod
# Linux/Mac: sudo systemctl start mongodb

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
npm run dev
```

Backend –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:5000`

### Frontend

```bash
cd frontend
npm install
npm run dev
```

Frontend –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:3000`

## üì± –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram

### –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞

1. –ù–∞–π–¥–∏—Ç–µ @BotFather –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Mini App

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ @BotFather –∫–æ–º–∞–Ω–¥—É `/newapp`
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
3. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
4. –í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ
5. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∫–æ–Ω–∫—É (512x512)
6. –ó–∞–≥—Ä—É–∑–∏—Ç–µ GIF –ø—Ä–µ–≤—å—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
7. –í–≤–µ–¥–∏—Ç–µ URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, https://yourdomain.com)

### Web App URL

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok –∏–ª–∏ –ø–æ–¥–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:

```bash
npx ngrok http 3000
```

–ó–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π URL –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Mini App.

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ —á–∞—Ç —Å –≤–∞—à–∏–º –±–æ—Ç–æ–º –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```
/start
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É:
```
https://t.me/your_bot_username/app
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Frontend
- **React 18** - UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- **TypeScript** - —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- **Vite** - —Å–±–æ—Ä—â–∏–∫
- **Zustand** - state management
- **React Router** - –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- **i18next** - –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
- **Axios** - HTTP –∫–ª–∏–µ–Ω—Ç
- **Telegram Web App SDK** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram

### Backend
- **Express** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **MongoDB** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Mongoose** - ODM
- **Socket.io** - real-time —á–∞—Ç—ã
- **Multer** - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
- **Nanoid** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ID

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### User
- nickname (unique)
- country
- city
- radius
- language
- contacts (telegram, phone, email)
- createdAt

### Listing
- serialNumber (unique, generated)
- userId
- userNickname
- category
- title
- description
- price
- negotiable
- city
- country
- photos[]
- status (active/hidden/rejected/deleted)
- views
- createdAt
- updatedAt

### Chat
- listingId
- participants[] (userId, nickname, contactsShared, contacts)
- messages[] (senderId, text, isSystemMessage, createdAt)
- createdAt
- updatedAt

### Report
- listingSerialNumber
- reporterId
- description
- status (pending/reviewed/resolved)
- createdAt

## üåê API Endpoints

### Users
- `POST /api/users/register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `GET /api/users/check-nickname/:nickname` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∏–∫–Ω–µ–π–º–∞
- `GET /api/users/:id` - –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
- `PUT /api/users/:id` - –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å

### Listings
- `GET /api/listings` - –≤—Å–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è (—Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏)
- `GET /api/listings/:id` - –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–æ ID
- `GET /api/listings/user/:userId` - –æ–±—ä—è–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/listings` - —Å–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
- `PUT /api/listings/:id` - –æ–±–Ω–æ–≤–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
- `PATCH /api/listings/:id/status` - –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å
- `DELETE /api/listings/:id` - —É–¥–∞–ª–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ

### Chats
- `GET /api/chats/user/:userId` - —á–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /api/chats/:id` - –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —á–∞—Ç
- `POST /api/chats` - —Å–æ–∑–¥–∞—Ç—å —á–∞—Ç
- `POST /api/chats/:id/messages` - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
- `POST /api/chats/:id/share-contacts` - –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏

### Reports
- `POST /api/reports` - —Å–æ–∑–¥–∞—Ç—å –∂–∞–ª–æ–±—É
- `GET /api/reports` - –≤—Å–µ –∂–∞–ª–æ–±—ã (–º–æ–¥–µ—Ä–∞—Ü–∏—è)
- `PATCH /api/reports/:id/status` - –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ê–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –î–æ–±—Ä–æ–≤–æ–ª—å–Ω—ã–π –æ–±–º–µ–Ω –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ —á–µ—Ä–µ–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —á–∞—Ç
- –°–∏—Å—Ç–µ–º–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ —Å –∂–∞–ª–æ–±–∞–º–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤ (5MB)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–∏–∫–Ω–µ–π–º–æ–≤

## üåç –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏

- üá∑üá∫ –†—É—Å—Å–∫–∏–π (ru)
- üá¨üáß English (en)
- üá∫üá¶ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ (uk)
- üá©üá™ Deutsch (de)
- üá´üá∑ Fran√ßais (fr)
- üá™üá∏ Espa√±ol (es)
- üáµüá± Polski (pl)

## üìù TODO

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1
- [x] –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- [x] –°–∏—Å—Ç–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- [x] –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å
- [x] Backend API
- [ ] –ö–∞—Ç–∞–ª–æ–≥ –æ–±—ä—è–≤–ª–µ–Ω–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —Ñ–æ—Ç–æ
- [ ] –°–∏—Å—Ç–µ–º–∞ —á–∞—Ç–æ–≤

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2
- [ ] –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
- [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º
- [ ] –°–∏—Å—Ç–µ–º–∞ –∂–∞–ª–æ–± –∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
- [ ] –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3
- [ ] –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- [ ] –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- [ ] –†–µ–π—Ç–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] –ü–ª–∞—Ç–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

Pull requests –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è! –î–ª—è —Å–µ—Ä—å–µ–∑–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–Ω–∞—á–∞–ª–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ issue –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è.

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
